KISSY.add("kg/search-suggest/6.0.23/mods/menu",["node"],function(e,t,n,r){var o=t("node"),u=o.all,l=function(e){var t=this;t.opts=KISSY.mix(l.defs,e),t.$wrap=u(t.opts.wrap),t.$menu=u(t.opts.menu),t.locs=[],t.rNow=null,t.tOut=null,t.init()};l.defs={wrap:"",menu:"",rows:"",dealy:300,handler:null,tolerance:0},l.prototype.getOffset=function(){var e=this,t=e.opts,n=e.$menu,r=n.offset();e.menuOffset=r,e.upperRight={x:r.left+n.outerWidth(),y:r.top-t.tolerance},e.lowerRight={x:r.left+n.outerWidth(),y:r.top+n.outerHeight()+t.tolerance}},l.prototype.bindEvent=function(){var e,t,n,r=this,o=r.opts,l=r.locs,a=r.rNow,i=r.tOut,s=null,f=function(i){function f(e,t){return(t.y-e.y)/(t.x-e.x)}var c=!!u(i).one(o.cls);r.getOffset(),e=r.menuOffset,t=r.upperRight,n=r.lowerRight;var p=l[l.length-1],g=l[0];if(!a||!p)return 0;if(g.x<e.left||g.x>n.x||g.y<e.top||g.y>n.y)return 0;if(s&&p.x==s.x&&p.y==s.y)return 0;var d=f(p,t),h=f(p,n),y=f(g,t),m=f(g,n);return c&&y>d&&h>m?(s=p,o.dealy):(s=null,0)},c=function(e){a!=e&&(o.handler.enterHandler(e),a=e)},p=function(e,t){t?r.isDelay=!0:r.isDelay=!1;var n=f(t);n?i=setTimeout(function(){p(r.currentTarget,r.currentTarget)},n):(r.isDelay=!1,c(e))},g=function(e){l.push({x:e.pageX,y:e.pageY}),l.length>3&&l.shift()},d=function(){a=null,o.handler.leaveHandler()},h=function(){r.isDelay=!1,a=null,i&&clearTimeout(i)},y=function(e){if(r.currentTarget=e.currentTarget,!r.isDelay){i&&clearTimeout(i);var t=e.relatedTarget,n=u(t).parent(o.rows);p(e.currentTarget,n)}};r.$wrap.on("mousemove",g).on("mouseleave",d),r.$menu.on("mouseleave",h).delegate("mouseenter",o.rows,y)},l.prototype.init=function(){this.getOffset(),this.bindEvent()},r.exports=l});