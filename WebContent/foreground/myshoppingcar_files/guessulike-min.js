KISSY.add("mainpathrec/guessulike",function(a,b,c,d,e,f,g){function h(a){var b={source:"https://tui.taobao.com/recommend",charset:document.charset||document.characterSet||"gbk",page:a.attr("data-page")||5,titltimg:a.attr("data-titltimg"),width:a.attr("data-width")||990,header:a.attr("data-header"),delay:a.attr("data-delay")||3e3,perpage:"scj"===a.attr("data-width")||"order"===a.attr("data-width")||"gwc"===a.attr("data-width")?5:a.attr("data-width")>950?5:4},c={count:b.page*b.perpage,_input_charset:b.charset,_output_charset:b.charset};a.attr("data-appid")&&(c.appid=a.attr("data-appid")),a.attr("data-orderid")&&(c.orderid=a.attr("data-orderid")),a.attr("data-itemids")&&(c.itemids=a.attr("data-itemids"));var d=j(location.search);d.itemid&&(c.itemid=d.itemid),d._rec_sid_&&(c._sid_=d._rec_sid_||2297),new g({type:"get",url:b.source,data:c,success:function(c){if(!c.result||!c.result.length)return i(a,b);c.result[0]&&c.result[0].extMap&&c.result[0].extMap.hasOwnProperty("explanation")||(b.reducedInfo=!0);for(var d=0,e=c.result.length;e>d;d++){c.result[d].extMap&&c.result[d].extMap.explanation&&(c.result[d].extMap.explanationbak=c.result[d].extMap.explanation,c.result[d].extMap.explanation=c.result[d].extMap.explanation.replace(/(['|"])[^'|"]*\1/gi,function(a){return"<span>"+a+"</span>"})),c.result[d].promotionPrice||(c.result[d].promotionPrice=c.result[d].price,delete c.result[d].price);var f=c.result[d].pic;try{c.result[d].pic.match(/\.([^\.]+)$/i)&&!c.result[d].pic.match(/_\d+x\d+\.([^\.]+)$/i)&&(c.result[d].pic+="_220x220.jpg")}catch(g){c.result[d].pic=f}}var h=[],j={pages:h};b.page=Math.ceil(c.result.length/b.perpage);for(var d=0;d<b.page;d++)h.push(c.result.splice(0,b.perpage));b.titltimg&&(j.titleimg=b.titltimg),j.header="false"===b.header?!1:!0,k(b,j,a)},error:function(){i(a,b)},dataType:"jsonp"})}function i(a,b){a.hide()}function j(a){for(var b={},c=(a||location.search).replace(/^\?/,"").split(/&/g),d=0;d<c.length;d++){var e=c[d].split(/=/);b[e[0]]=e[1]}return b}function k(a,c,d){l(c,d),d.addClass("gul-w-"+a.width);var g=d.one(".J_content"),h=new e({config:{theme:"theme-1",$module:d.one(".pagination"),totalPage:a.page,timeDelay:a.delay,actions:[],enableExtraControl:!1,extraControlPosition:"center"}});d.all(".item").on("mouseenter mouseleave",function(a){b.one(this).toggleClass("item-hover")}),a.reducedInfo&&g.addClass("reducedInfo"),h.on("pagechange:mini-pagination",function(a){m(a.pageIndex,void 0,g)}),h.setCurrentPage(0);var i,j,k=d.one(".c-page-prev"),n=d.one(".c-page-next");g.on("mouseenter",function(){h.pause(),i&&i.stop(),j&&j.stop(),i=new f(k,{left:0},.3,"easeOut",function(){}).run(),j=new f(n,{right:0},.3,"easeOut",function(){}).run()}).on("mouseleave",function(){h.play(),i&&i.stop(),j&&j.stop(),i=new f(k,{left:-50},.3,"easeOut",function(){}).run(),j=new f(n,{right:-50},.3,"easeOut",function(){}).run()}),k.on("click",function(){h.prev()}),n.on("click",function(){h.next()})}function l(a,b){var c=new d('{{#if header}}      <div class="head">          <div class="title">              <div class="i-title">\u731c\u4f60\u559c\u6b22</div>              <div class="i-title2">\u6dd8\u5b9d\u53d1\u73b0</div>              <div class="txt">\u6839\u636e\u4f60\u6700\u8fd1\u6d4f\u89c8\u63a8\u8350</div>          </div>          <div class="line"></div>      </div>      {{/if}}      <div class="content J_content">          <a class="c-page-prev" ondragstart="return false" onselectstart ="return false"></a>          <a class="c-page-next" ondragstart="return false" onselectstart ="return false"></a>      {{#each pages}}          <div class="page">              <div class="c-adjust float-wrap">              {{#each this}}                  <div class="item" href="{{url}}">                      <a title="{{itemName}}" class="shortcut" href="{{url}}" target="_blank">                          <img src="{{pic}}"><span></span>                          </a>                          <div class="price-wrap">                              <a class="c" href="{{url}}" target="_blank">                                  <span class="price">&yen;{{promotionPrice}}</span>                          {{#if price}}<span class="old_price">&yen;{{price}}</span>{{/if}}                              </a>                              <div class="line"></div>                          </div>                          <div class="item-title">                              <a title="{{itemName}}" href="{{url}}" target="_blank">{{itemName}}</a>                          </div>                          <div class="info-wrap">                              <div class="item-info">                      <!-- 2015\u53cc\u5341\u4e00\u6253\u6807 -->                      {{#if extMap&&(extMap.icon2015||extMap.hongbao2015||extMap.manfan2015)}}                          {{#if extMap.hongbao2015==="on"}}                              <span class="icon-2015 hongbao2015"></span>                          {{/if}}                          {{#if extMap.icon2015==="tb"}}                              <span class="icon-2015 icon-tb"></span>                          {{/if}}                          {{#if extMap.icon2015==="jingxuan"}}                              <span class="icon-2015 icon-tb"></span>                          {{/if}}                          {{#if extMap.icon2015==="alitrip"}}                              <span class="icon-2015 icon-alitrip"></span>                          {{/if}}                          {{#if extMap.icon2015==="tmall"}}                              <span class="icon-2015 icon-tmall"></span>                          {{/if}}                          {{#if extMap.manfan2015==="gouwuquan"}}                              <span class="icon-2015 icon-manfan"></span>                          {{/if}}                          {{#if extMap.icon2015==="yushou"}}                              <span class="icon-2015 icon-yushou"></span>                          {{/if}}                      <!-- 2015\u53cc\u5341\u4e00\u6253\u6807 -->                      {{else}}                          {{#if extMap&&(extMap.isB2C==="1"||extMap.isB2C===1)}}<a class="lx-icon icon-tmall" href="{{url}}" target="_blank"></a>{{/if}}                          {{#if extMap&&extMap.promotionTag}}<a class="tag                             {{#if extMap.isB2C==="1"}} tag2                             {{else}}                              {{#if extMap.isJYJ==="1"}} tagJYJ                               {{/if}}                          {{/if}}" href="{{url}}" target="_blank">{{extMap.promotionTag}}</a>{{/if}}                      {{/if}}                          <a class="sold-wrap" href="{{url}}" target="_blank">                              \u6708\u9500<span class="sold">{{monthSellCount}}</span>                          </a>                      </div>                      {{#if extMap&&extMap.explanation}}                      <a class="recommend_by" href="{{url}}" target="_blank" title="{{extMap.explanationbak}}">{{{extMap.explanation}}}</a>                      {{/if}}                  </div>              </div>              {{/each}}          </div>      </div>      {{/each}}  </div>  <div class="pagination"></div>').render(a);b.html(c)}function m(a,c,d){var e=d.all(".page");e.removeClass("current"),b(e[a]).addClass("current")}function n(a){var b=a.offset().top,d=c.scrollTop(),e=c.viewportHeight()+d;return b>=d&&b<e+.5*c.viewportHeight()}return function(){var a=b.all(".J_guess-you-like");a.each(function(a,b){var c=a,d=setInterval(function(){n(c)&&(h(c),clearInterval(d))},200)})}},{requires:["node","dom","xtemplate","./mini-pagination","anim","ajax","./guessulike.css"]});