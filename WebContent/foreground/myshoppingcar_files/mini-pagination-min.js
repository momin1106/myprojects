KISSY.add("mainpathrec/mini-pagination",function(a,b,c,d){function e(c){var d=this,c=a.clone(c.config);if(this.set("config",c),this.generatePage(c),c.actions instanceof Array)for(var e=0,f=c.actions.length;f>e;e++)c.$module.one(".action-"+c.actions[e].id).on("click tap",c.actions[e].handler);c.enableExtraControl&&(c.$module.one(".page-prev").on("click",function(){d.prev()}),c.$module.one(".page-next").on("click",function(){d.next()})),c.timeDelay&&this.autoPlay(),c.$module.delegate("mouseenter",".thumb",function(a){var c=b(a.target),e=parseInt(c.attr("tid"));d.set("currentPage",e)}),this.on("beforeCurrentPageChange",function(a){if(!1!==d.fire("pagechange:mini-pagination",{pageIndex:a.newVal})){var e=b(c.$module.all(".thumb")[a.newVal]);e.addClass("current").siblings(".thumb").removeClass("current")}else a.preventDefault()})}var f;return e.ATTRS={currentPage:{value:-1},isPause:{value:!1}},f=a.version<"1.4.0"?a.extend(e,c,{generatePage:function(a){a.pages=[];for(var b=0;b<a.totalPage;b++)a.pages.push(b);a.$module.html(new d('<div class="J_mini-pagination{{#if theme}} {{theme}}{{/if}}" unselectable="on" onselectstart="return false;">                        <div class="pagi-wrap">                            {{#if enableExtraControl&&extraControlPosition==="surround"}}<span class="page-prev"></span>{{/if}}                            <div class="thumb-wrap">                                {{#each pages}}                                <span class="thumb" tid="{{this}}">\u2022</span>                                {{/each}}                            </div>                            {{#if enableExtraControl&&extraControlPosition==="center"}}                            <span class="page-prev"></span>                            <span class="page-next"></span>                            {{/if}}                            {{#each actions}}                            <span class="action action-{{this.id}}">{{this.title}}</span>                            {{/each}}                            {{#if enableExtraControl&&extraControlPosition==="surround"}}<span class="page-next"></span>{{/if}}                        </div>                    </div>').render(a))},reset:function(){this.set("currentPage",0)},autoPlay:function(){var a=this;this.get("config").totalPage;this.on("afterCurrentPageChange",function(b){this.get("isPause")||(a.pause(),a.play())})},play:function(){var a=this,b=this.get("config").totalPage;a.set("autoPlayTimeout",setTimeout(function(){var c=a.get("currentPage");a.set("currentPage",b-1>c?c+1:0)},a.get("config").timeDelay)),this.set("isPause",!1)},prev:function(){var a=this.get("currentPage"),b=this.get("config").totalPage;this.set("currentPage",a>0?a-1:b-1)},next:function(){var a=this.get("currentPage"),b=this.get("config").totalPage;this.set("currentPage",b-1>a?a+1:0)},pause:function(){clearTimeout(this.get("autoPlayTimeout")),this.set("isPause",!0)},destroy:function(){this.pause(),this.get("config").$module.empty()}}):c.extend({initializer:function(){var c=this,d=a.clone(this.get("config"));if(this.set("config",d),this.generatePage(d),d.actions instanceof Array)for(var e=0,f=d.actions.length;f>e;e++)d.$module.one(".action-"+d.actions[e].id).on("click tap",d.actions[e].handler);d.enableExtraControl&&(d.$module.one(".page-prev").on("click",function(){c.prev()}),d.$module.one(".page-next").on("click",function(){c.next()})),d.timeDelay,d.$module.delegate("mouseenter",".thumb",function(a){var d=b(a.target),e=parseInt(d.attr("tid"));c.set("currentPage",e)}),this.on("beforeCurrentPageChange",function(a){if(!1!==c.fire("pagechange:mini-pagination",{pageIndex:a.newVal})){var e=b(d.$module.all(".thumb")[a.newVal]);e.addClass("current").siblings(".thumb").removeClass("current")}else a.preventDefault()})},generatePage:function(a){a.pages=[];for(var b=0;b<a.totalPage;b++)a.pages.push(b);a.$module.html(new d('<div class="J_mini-pagination{{#if theme}} {{theme}}{{/if}}" unselectable="on" onselectstart="return false;">                        <div class="pagi-wrap">                            {{#if enableExtraControl&&extraControlPosition==="surround"}}<span class="page-prev"></span>{{/if}}                            <div class="thumb-wrap">                                {{#each pages}}                                <span class="thumb" tid="{{this}}">\u2022</span>                                {{/each}}                            </div>                            {{#if enableExtraControl&&extraControlPosition==="center"}}                            <span class="page-prev"></span>                            <span class="page-next"></span>                            {{/if}}                            {{#each actions}}                            <span class="action action-{{this.id}}">{{this.title}}</span>                            {{/each}}                            {{#if enableExtraControl&&extraControlPosition==="surround"}}<span class="page-next"></span>{{/if}}                        </div>                    </div>').render(a))},reset:function(){this.set("currentPage",0)},autoPlay:function(){var a=this;this.get("config").totalPage;this.on("afterCurrentPageChange",function(b){this.get("isPause")||(a.pause(),a.play())})},play:function(){var a=this,b=this.get("config").totalPage;a.set("autoPlayTimeout",setTimeout(function(){var c=a.get("currentPage");a.set("currentPage",b-1>c?c+1:0)},a.get("config").timeDelay)),this.set("isPause",!1)},prev:function(){var a=this.get("currentPage"),b=this.get("config").totalPage;this.set("currentPage",a>0?a-1:b-1)},next:function(){var a=this.get("currentPage"),b=this.get("config").totalPage;this.set("currentPage",b-1>a?a+1:0)},pause:function(){clearTimeout(this.get("autoPlayTimeout")),this.set("isPause",!0)},destructor:function(){this.pause(),this.get("config").$module.empty()}},{name:"Pagination",ATTRS:{currentPage:{value:-1},isPause:{value:!1}}}),function(a){var b=new f(a);return{on:function(a,c){b.on(a,c)},setCurrentPage:function(a){b.set("currentPage",a)},reset:function(){b.reset()},pause:function(){b.pause()},play:function(){b.play()},prev:function(){b.prev()},next:function(){b.next()},destroy:function(){b.destroy()}}}},{requires:["node","base","xtemplate","./pagination.css"]});