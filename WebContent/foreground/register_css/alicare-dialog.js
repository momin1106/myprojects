var AlicareDialog=function(t){function e(o){if(i[o])return i[o].exports;var n=i[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){t.exports=i(7)},function(t,e){"use strict";t.exports={getEnvironment:function(){var t=void 0,e=location.hostname;return t=/daily|waptest/g.test(e)?"daily":"prod"},HtmlToDom:function(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]},bindEvent:function(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)},haltEvent:function(t){var e=t||window.event;e.preventDefault?e.preventDefault():e.returnValue=!1,e.stopPropagation?e.stopPropagation():e.cancelBubble&&(e.cancelBubble=!0)},getScreenWidthAndHeight:function(){return{width:document.documentElement.clientWidth||document.body.clientWidth,height:document.documentElement.clientHeight||document.body.clientHeight}},computePosition:function(t){var e=t||window.event,i=e.pageX||e.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),o=e.pageY||e.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);return{pageX:i,pageY:o}},hasClass:function(t,e){return!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))},addClass:function(t,e){this.hasClass(t,e)||(t.className+=" "+e)},removeClass:function(t,e){if(this.hasClass(t,e)){var i=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(i," ")}},remove:function(t){t.parentNode.removeChild(t)},isIframe:function(t){return t&&"[object HTMLIFrameElement]"===Object.prototype.toString.call(t)},isDom:function(t){return t&&1===t.nodeType},isNumber:function(t){return"number"==typeof t},isPercentage:function(t){return/%$/g.test(t+"")}}},function(t,e){"use strict";function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(t){return"function"==typeof t}function n(t){return"number"==typeof t}function r(t){return"object"===("undefined"==typeof t?"undefined":s(t))&&null!==t}function a(t){return void 0===t}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(t){if(!n(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},i.prototype.emit=function(t){var e,i,n,s,l,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||r(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var u=new Error('Uncaught, unspecified "error" event. ('+e+")");throw u.context=e,u}if(i=this._events[t],a(i))return!1;if(o(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),i.apply(this,s)}else if(r(i))for(s=Array.prototype.slice.call(arguments,1),c=i.slice(),n=c.length,l=0;l<n;l++)c[l].apply(this,s);return!0},i.prototype.addListener=function(t,e){var n;if(!o(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,o(e.listener)?e.listener:e),this._events[t]?r(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,r(this._events[t])&&!this._events[t].warned&&(n=a(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(t,e){function i(){this.removeListener(t,i),n||(n=!0,e.apply(this,arguments))}if(!o(e))throw TypeError("listener must be a function");var n=!1;return i.listener=e,this.on(t,i),this},i.prototype.removeListener=function(t,e){var i,n,a,s;if(!o(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(i=this._events[t],a=i.length,n=-1,i===e||o(i.listener)&&i.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(r(i)){for(s=a;s-- >0;)if(i[s]===e||i[s].listener&&i[s].listener===e){n=s;break}if(n<0)return this;1===i.length?(i.length=0,delete this._events[t]):i.splice(n,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},i.prototype.removeAllListeners=function(t){var e,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[t],o(i))this.removeListener(t,i);else if(i)for(;i.length;)this.removeListener(t,i[i.length-1]);return delete this._events[t],this},i.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?o(this._events[t])?[this._events[t]]:this._events[t].slice():[]},i.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(o(e))return 1;if(e)return e.length}return 0},i.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e){"use strict";var i={},o="alicare_dialog";t.exports={sendLog:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Image,r="img_"+Math.random(),a=(new Date).getTime(),s=i.from||"unknown";t.ext=JSON.stringify(t.ext)||"";var l="https://gm.mmstat.com/ihelp.a21ib.8016006."+o+"."+t.d+"?cache="+a+"&ext="+t.ext+("&memberType="+i.memberType+"&from="+s+"&imsid="+i.imsid+"&autosend=1");window[r]=n,n.onload=n.onerror=function(){window[r]=null},e?n.setAttribute("src",l):setTimeout(function(){n.setAttribute("src",l)},500)},setLog:function(t){i=t}}},function(t,e,i){"use strict";var o=i(9),n=i(1),r={daily:"//service.daily.taobao.net/support/alicare/alicareMiniConfig.do",prod:"//service.taobao.com/support/alicare/alicareMiniConfig.do"};t.exports={sendMessage:function(t){n.isIframe(this)&&this.contentWindow.postMessage(JSON.stringify({message:t,source:"alicare-dialog"}),"*")},getAlicareMiniConfig:function(t,e){var i=n.getEnvironment();o.get(r[i],{from:t.from,orderId:t.orderId,sourceURL:window.location.href},e)}}},function(t,e,i){"use strict";var o=i(1);t.exports={frameDuration:20,opacityUnit:.1,positionUnit:20,defaultTimes:7,showDialog:function(t,e){var i=this,o=this.defaultTimes,n=.1,r=-80,a=1,s=12;t.parentNode.style.display="block",clearInterval(this.showDialogId);var l=n,c=r,u=Math.ceil(Math.abs(a-n)/o),f=Math.ceil(Math.abs(s-r)/o);this.showDialogId=setInterval(function(){l=l+u>a?a:l+u,c=c+f>s?s:c+f,t.style.opacity=l,t.style.right=c+"px",c>=s&&(clearInterval(i.showDialogId),"function"==typeof e&&e())},this.frameDuration)},closeDialog:function(t,e){var i=this,o=this.defaultTimes,n=1,r=12,a=.1,s=-80;clearInterval(this.closeDialogId);var l=n,c=r,u=Math.ceil(Math.abs(a-n)/o),f=Math.ceil(Math.abs(s-r)/o);this.closeDialogId=setInterval(function(){l=l-u<=a?a:l-u,c=c-f<=s?s:c-f,t.style.opacity=l,t.style.right=c+"px",c<=s&&(clearInterval(i.closeDialogId),t.parentNode.style.display="none","function"==typeof e&&e())},this.frameDuration)},changeEnvironment:function(t,e,i,n){var r=this;t.style.position="absolute",e.style.position="absolute";var a=o.getScreenWidthAndHeight(),s=i.getBoundingClientRect(),l=0,c=0,u=a.height-s.bottom,f=a.height-s.bottom+64;i.style.left?(t.style.left="0px",e.style.left="0px"):(t.style.right="0px",e.style.right="0px");var d=void 0;i.style.top?d="top":(d="bottom",f=-f-t.clientHeight,u=-u-e.clientHeight),t.style[d]=l+"px",e.style[d]=u+"px",this.attrChange(t,d,l,f,7,"toFast",function(){r.attrChange(e,d,u,c,5,"toSlow",function(){var i=["position","top","right","left","bottom"];r.clearAttrs(t,i),r.clearAttrs(e,i),"function"==typeof n&&n()})})},attrChange:function(t,e,i,o,n,r,a){var s=this,l=a||("function"===r?r:a);clearInterval(this.attrChangeId);var c=i,u=Math.ceil(Math.abs(o-i)/n),f=0;"toFast"===r?f=1:"toSlow"===r&&(f=-1),o<i&&(u=-u,f=-f),this.attrChangeId=setInterval(function(){c=c+u>=o&&o>i||c+u<=o&&o<i?o:c+u,u+=f,t.style[e]=c+"px",(c>=o&&o>i||c<=o&&o<i)&&(clearInterval(s.attrChangeId),"function"==typeof l&&l())},this.frameDuration)},clearAttrs:function(t,e){for(var i=0;i<e.length;i++)t.style[e[i]]=""}}},function(t,e){"use strict";t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var i=this[e];i[2]?t.push("@media "+i[2]+"{"+i[1]+"}"):t.push(i[1])}return t.join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},n=0;n<this.length;n++){var r=this[n][0];"number"==typeof r&&(o[r]=!0)}for(n=0;n<e.length;n++){var a=e[n];"number"==typeof a[0]&&o[a[0]]||(i&&!a[2]?a[2]=i:i&&(a[2]="("+a[2]+") and ("+i+")"),t.push(a))}},t}},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=(i(10),i(4)),r=i(3),a=i(13),s=function(){function t(e){var i=this;o(this,t);var r=e;return e.accessToken&&(r.needAuthorized=!0),n.getAlicareMiniConfig(e,function(t){if(0===t.status&&t.data){var e=t.data,o=e.viewType,n=e.recommendQuestions,a=e.bu,s=e.color,l=e.appId,c=e.robotCode,u=e.robotScene;r.type=o,r.recommendQuestions=n,r.bu=a,r.color=s,r.robotScene=u,r.robotCode=c,r.appId=l,i.__init(r)}})}return t.prototype.__init=function(t){this.ui=new a(t),r.setLog({from:t.from,memberType:"",imsid:""})},t.prototype.onRendered=function(t){var e=this;t&&"function"==typeof t&&setTimeout(function(){e.ui?t(e.ui):e.onRendered(t)},300)},t}();t.exports=s,window.alicareDialogAsyncInit&&window.alicareDialogAsyncInit(s)},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=i(1),r=i(3);t.exports=function(){function t(e){o(this,t),this.config=e,this.isDragReady=!1,this.hasDragged=!1,this.__bindEvent()}return t.prototype.__bindEvent=function(){var t=this,e=this.config,i=e.draggerElement,o=e.maskSelector,a={x:0,y:0},s={x:0,y:0};n.bindEvent(i,"mouseover",function(t){var e=t||window.event,o=e.srcElement||e.target;if(o){var r=i.clientHeight;return 0===r?void(o.style.cursor=""):void(n.hasClass(o,"alicare-draggable")&&(o.style.cursor="move"))}}),n.bindEvent(i,"mousedown",function(e){var r=e||window.event,l=r.srcElement||r.target;if(l){n.haltEvent(r),t.isDragReady=!0;var c=i.querySelector(o);c&&(c.style.visibility="visible");var u=n.computePosition(r);a.x=u.pageX-i.offsetLeft,a.y=u.pageY-i.offsetTop,s.x=r.clientX,s.y=r.clientY}}),n.bindEvent(document,"mouseup",function(e){t.isDragReady=!1;var n=i.querySelector(o);n&&(n.style.visibility="hidden"),t.hasDragged&&(r.sendLog({d:"drag"}),setTimeout(function(){t.hasDragged=!1},60),i.style.cursor="")}),n.bindEvent(document,"mousemove",function(e){var o=e||window.event,r=(o.target,{x:o.clientX,y:o.clientY});if(!(s.x&&r.x&&Math.abs(s.x-r.x)<=1&&s.y&&r.y&&Math.abs(s.y-r.y)<=1)&&t.isDragReady){var l=i.clientHeight;if(0===l)return;var c=n.getScreenWidthAndHeight(),u=n.computePosition(o),f={width:i.offsetWidth,height:i.offsetHeight},d=void 0,p=void 0,h=u.pageY-a.y,g=u.pageX-a.x;g>(c.width-f.width)/2?(g=c.width-f.width-g,p="right",i.style.left&&(i.style.left="")):(p="left",i.style.right&&(i.style.right="")),g<5&&(g=5),i.style[p]=g+"px",h>(c.height-f.height)/2?(h=c.height-f.height-h,d="bottom",i.style.top&&(i.style.top="")):(d="top",i.style.bottom&&(i.style.bottom=""));var m=i.querySelector(".J_Dialog"),v=document.documentElement.clientHeight,y={top:10,bottom:10},_={top:v,bottom:v};if(m&&"block"===m.style.display){var b=-parseInt(m.style.bottom||0,10),x=m.clientHeight;y.top=x-b-l,y.bottom=b,_.top=v-b-l,_.bottom=v-x+b}h<y[d]?h=y[d]:h>_[d]&&(h=_[d]),i.style[d]=h+"px",t.hasDragged=!0,i.style.cursor="move"}})},t.prototype.wrapClickFunc=function(t){var e=this;return function(i){e.hasDragged||t(i)}},t}()},function(t,e){"use strict";function i(t,e){var i=document.createElement("script"),o=!1;i.src=t,i.async=!0;var n=e||s.error;"function"==typeof n&&(i.onerror=function(e){n({url:t,event:e})}),i.onload=i.onreadystatechange=function(){o||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(o=!0,i.onload=i.onreadystatechange=null,i&&i.parentNode&&i.parentNode.removeChild(i))},l||(l=document.getElementsByTagName("head")[0]),l.appendChild(i)}function o(t){return encodeURIComponent(t)}function n(t,e,n,r){var l=(t||"").indexOf("?")===-1?"?":"&",c=void 0,u=r||s.callbackName||"callback",f=u+"_json"+ ++a,d=e||{};for(c in d)d.hasOwnProperty(c)&&(l+=o(c)+"="+o(d[c])+"&");return window[f]=function(t){n(t);try{delete window[f]}catch(t){}window[f]=null},i(""+t+l+u+"="+f),f}function r(t){s=t}var a=0,s={},l=void 0;t.exports={get:n,init:r}},function(t,e){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,o=function(){},n=function(){return i.apply(this instanceof o?this:t||this,e.concat(Array.prototype.slice.call(arguments)))};return o.prototype=this.prototype,n.prototype=new o,n}),Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var o=[],n=arguments.length>=2?arguments[1]:void 0,r=0;r<i;r++)if(r in e){var a=e[r];t.call(n,a,r,e)&&o.push(a)}return o}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t,e){var i;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),n=o.length>>>0;if(0===n)return-1;var r=+e||0;if(Math.abs(r)===1/0&&(r=0),r>=n)return-1;for(i=Math.max(r>=0?r:n-Math.abs(r),0);i<n;){if(i in o&&o[i]===t)return i;i++}return-1}),"function"!=typeof Object.create&&(Object.create=function(){function t(){}var e=Object.prototype.hasOwnProperty;return function(o){if("object"!=("undefined"==typeof o?"undefined":i(o)))throw TypeError("Object prototype may only be an Object or null");t.prototype=o;var n=new t;if(t.prototype=null,arguments.length>1){var r=Object(arguments[1]);for(var a in r)e.call(r,a)&&(n[a]=r[a])}return n}}())},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=i(2),s=i(1);t.exports=function(t){function e(i){o(this,e);var r=n(this,t.call(this));return r.ui=i,r.__renderLayout(),r}return r(e,t),e.prototype.__renderLayout=function(){var t=this.ui;return t.config.tpl?(this.$elem=s.HtmlToDom(t.config.tpl),void t.$container.insertBefore(this.$elem,t.dialog.$elem)):void console.log("请在初始化 config 里，配置自定义模板！")},e}(a)},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=i(2),s=i(17),l=i(4),c=i(1),u=i(3),f=i(5),d={daily:"//service.daily.taobao.net/support/alicare/index.htm?",prod:"//service.taobao.com/support/alicare/index.htm?"};t.exports=function(t){function e(i){o(this,e);var r=n(this,t.call(this));return r.ui=i,r.config=i.config,r.isShow=!1,r.iframeSrc=null,r.__renderDialog(),r.__bindEvents(),r.__setIframeSrc(),r}return r(e,t),e.prototype.__renderDialog=function(){var t=this.ui;this.$elem=c.HtmlToDom(s),this.$dialog=this.$elem.querySelector(".alicare-dialog-wrapper"),this.$iframe=this.$elem.querySelector(".alicare-frame"),this.$iframe.frameBorder=0,t.$container.appendChild(this.$elem)},e.prototype.__setIframeSrc=function(){var t=this.config,e=d[c.getEnvironment()],i=["from","bu","orderId","activeScroll","robotScene","robotCode","appId","accessToken","needAuthorized"];i.forEach(function(i){t[i]&&(e+="&"+i+"="+encodeURIComponent(t[i]))}),this.iframeSrc=e},e.prototype.__updatePositon=function(){var t=this.ui.$container,e=-8,i=0,o=void 0,n=void 0,r=void 0,a=void 0,s=document.documentElement.clientHeight,l=document.documentElement.clientWidth,u=this.ui.layout?this.ui.layout.clientHeight:0,f=this.ui.layout?this.ui.layout.clientWidth:0,d=this.$elem.clientHeight,p=this.$dialog.clientWidth,h=function(t){return parseInt(t,10)/100},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;return i=c.isPercentage(t)?h(t)*e:parseInt(t,10)};this.config.dialog&&this.config.dialog.offset&&(i=this.config.dialog.offset.y,i&&i<0&&(e+=i)),t.style.top?(o=g(t.style.top,s),n=s-o-u):t.style.bottom&&(n=g(t.style.bottom,s),o=s-n-u);var m=o+u+4-d;n<-e&&(e=-n),m<0&&(e=m>e?e:m),this.$elem.style.bottom=e+"px",t.style.left?r=g(t.style.left,l):t.style.right&&(a=g(t.style.right,l),r=l-a-f),r<p&&(t.style.left=p+8+"px")},e.prototype.__bindEvents=function(){var t=this.ui,e=this.$elem.querySelector(".alicare-im-close");c.bindEvent(e,"click",t.draggable.wrapClickFunc(function(){t.emit("closeDialog",{isOwnEvent:!0})}))},e.prototype.show=function(t){this.isShow||(!this.$iframe.src&&this.iframeSrc&&(this.$iframe.src=t?this.iframeSrc+"&question="+encodeURIComponent(t):this.iframeSrc),f.showDialog(this.$dialog),this.__updatePositon()),t&&l.sendMessage.call(this.$iframe,t),this.isShow=!0,u.sendLog({d:"open_dialog_"+this.config.type||"weak"})},e.prototype.hide=function(t){var e=this.ui;this.isShow&&f.closeDialog(this.$dialog,t),this.isShow=!1,e.weak&&e.weak.toggleActive(),u.sendLog({d:"close_dialog"})},e}(a)},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=i(2),s=i(15),l=i(14),c=i(11),u=i(12),f=i(1),d=i(8),p=i(5),h=i(3);i(21),t.exports=function(t){function e(i){o(this,e);var r=n(this,t.call(this));return r.config=i,r.__renderContainer(),r.__initDialog(),r.__initLayout(),r.__bindEvent(),r}return r(e,t),e.prototype.__renderContainer=function(){var t=this.config,e=document.createElement("div");e.id="J_xiaomi_dialog",document.body.appendChild(e),e.style.zIndex=t["z-index"]||"999999",this.$container=e,this.__initPosition(),this.__initColor(),this.__initDraggable()},e.prototype.__initDraggable=function(){var t=this.config;t.undraggable?this.draggable={wrapClickFunc:function(t){return t}}:this.draggable=new d({draggerElement:this.$container,maskSelector:".dialog-fake-mask"})},e.prototype.__bindEvent=function(){var t=this;this.on("openDialog",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.isOwnEvent;t.__checkEmit({isOwnEvent:i,emitEvent:t.__openAlicareDialog})}),this.on("closeDialog",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.isOwnEvent,o=e.callback;t.__checkEmit({isOwnEvent:i,callback:o,emitEvent:t.__closeAlicareDialog})}),this.on("message",function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.isOwnEvent;t.__checkEmit({isOwnEvent:o,message:e,emitEvent:t.__openAlicareDialog})}),this.on("toggleDialog",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.isOwnEvent;t.__checkEmit({isOwnEvent:i,emitEvent:t.__toggleDialog})}),this.once("closeStrong",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.isOwnEvent;t.__checkEmit({isOwnEvent:i,emitEvent:t.__changeEnvironment})})},e.prototype.__checkEmit=function(t){var e="customized"===this.config.type,i=t.isOwnEvent,o=t.emitEvent;o&&"function"==typeof o&&(!e&&i?o.call(this,t):e&&o.call(this,t))},e.prototype.__initPosition=function(){var t=this.config,e={},i=["left","right","top","bottom"],o=(document.documentElement.clientHeight,document.documentElement.clientWidth,f.isNumber),n=f.isPercentage,r=function(t){return 0!==parseInt(t||0,10)};if(t.position){for(var a in t.position)if(i.indexOf(a)!==-1){var s=t.position[a];e[a]=parseInt(s,10)<0?0:s}}else if(t.container&&t.container.selector){var l=document.querySelectorAll(t.container.selector)[0];if(!f.isDom(l))return;var c=l.getBoundingClientRect(),u="left"===t.container.align?"right":"left";if(e[u]=c[u]+("left"===u?c.width:0),t.offset||t.container.offset){var d=t.offset||t.container.offset;o(d.x)&&(o(e.left)?e.left+=d.x:e.right-=d.x),o(d.y)&&(o(e.top)?e.top+=d.y:o(e.bottom)?e.bottom-=d.y:e.bottom=50-d.y)}}r(e.left)||r(e.right)||(e.right=40),r(e.top)||r(e.bottom)||(e.bottom=50),r(e.top)&&r(e.bottom)&&(e.bottom=null),r(e.left)&&r(e.right)&&(e.right=null);for(var p in e){var h=e[p];o(h)?this.$container.style[p]=0===h?null:h+"px":n(h)&&(this.$container.style[p]=h)}},e.prototype.__initColor=function(){var t=this.config.color||"#f7931e",e="#J_xiaomi_dialog .J_weak:hover {\n                        border-color: "+t+";\n                        color: "+t+"; \n                     }\n                     #J_xiaomi_dialog .J_weak.active {\n                        border-color: "+t+";\n                        background-color: "+t+"; \n                     }\n                     #J_xiaomi_dialog .J_weak .xiaomi-avatar {\n                        color: "+t+"; \n                     }\n                     #J_xiaomi_dialog .J_strong .card .header {\n                        background-color: "+t+"; \n                     }\n                     #J_xiaomi_dialog .J_strong .close-icon {\n                        background-color: "+t+"; \n                     }",i=document.createElement("style");i.setAttribute("type","text/css"),i.styleSheet?i.styleSheet.cssText=e:i.innerHTML=e;var o=document.getElementsByTagName("style");o[o.length-1].parentNode.appendChild(i)},e.prototype.__initLayout=function(){var t=this.config,e=t.type,i=t.recommendQuestions;switch(e){case"strong":i&&0!==i.length?this.__initStrong():this.__initWeak();break;case"customized":this.__initCustomized();break;case"weak":default:this.__initWeak()}h.sendLog({d:"init_"+e||"weak"})},e.prototype.__initDialog=function(){this.dialog=new u(this),h.sendLog({d:"init_dialog"})},e.prototype.__initWeak=function(){this.weak=new s(this),this.layout=this.weak.$elem},e.prototype.__initStrong=function(){this.strong=new l(this),this.layout=this.strong.$elem},e.prototype.__initCustomized=function(){this.customized=new c(this),this.layout=this.customized.$elem},e.prototype.__changeEnvironment=function(t){var e=this;t.callback;this.weak||this.__initWeak(),this.dialog.isShow&&this.__closeAlicareDialog(t),p.changeEnvironment(this.strong.$elem,this.weak.$elem,this.$container,function(){f.remove(e.strong.$elem),delete e.strong})},e.prototype.__openAlicareDialog=function(t){var e=t.message;this.dialog.show(e)},e.prototype.__closeAlicareDialog=function(t){var e=t.callback;this.dialog.hide(e)},e.prototype.__toggleDialog=function(t){this.dialog.isShow?this.__closeAlicareDialog(t):this.__openAlicareDialog(t)},e}(a)},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=i(2),s=i(1),l=i(3),c=i(18);t.exports=function(t){function e(i){o(this,e);var r=n(this,t.call(this));return r.ui=i,r.__renderLayout(),r.__bindEvents(),r}return r(e,t),e.prototype.__renderLayout=function(){var t=this.ui,e="",i=t.config.recommendQuestions;this.$elem=s.HtmlToDom(c),Array.prototype.forEach.call((i||[]).slice(0,5),function(t,i){e+='<li data-id="'+t.knowledgeId+'" data-index="'+(i+1)+'">'+t.question+"</li>"}),this.$elem.querySelector("ul").innerHTML=e,t.$container.insertBefore(this.$elem,t.dialog.$elem)},e.prototype.__bindEvents=function(){var t=this.$elem,e=this.ui,i=t.querySelector(".close-icon");s.bindEvent(i,"click",e.draggable.wrapClickFunc(function(){l.sendLog({d:"change_environment"}),e.emit("closeStrong",{isOwnEvent:!0})}));var o=t.querySelectorAll(".alicare-strong-card ul li");Array.prototype.forEach.call(o||[],function(t){s.bindEvent(t,"click",e.draggable.wrapClickFunc(function(i){var o=i.currentTarget;l.sendLog({d:"click_question",ext:{index:o.dataset.index,knowledgeId:o.dataset.id,forecast:e.config.forecast||1}}),e.emit("message",t.innerHTML,{isOwnEvent:!0})}))});var n=t.querySelector(".alicare-strong-card .alicare-strong-consult a");s.bindEvent(n,"click",e.draggable.wrapClickFunc(function(){e.emit("toggleDialog",{isOwnEvent:!0})}))},e}(a)},function(t,e,i){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=i(2),s=i(19),l=i(1);t.exports=function(t){function e(i){o(this,e);var r=n(this,t.call(this));return r.ui=i,r.__renderLayout(),r.__bindEvents(),r}return r(e,t),e.prototype.__renderLayout=function(){var t=this.ui;this.$elem=l.HtmlToDom(s),t.$container.insertBefore(this.$elem,t.dialog.$elem),this.toggleActive()},e.prototype.toggleActive=function(){var t=this.ui,e=this.$elem;t.dialog.isShow?l.addClass(e,"active"):l.removeClass(e,"active")},e.prototype.__bindEvents=function(){var t=this,e=this.ui;l.bindEvent(this.$elem,"click",e.draggable.wrapClickFunc(function(){e.dialog.isShow?e.emit("closeDialog",{isOwnEvent:!0}):e.emit("openDialog",{isOwnEvent:!0}),t.toggleActive()}))},e}(a)},function(t,e,i){e=t.exports=i(6)(),e.push([t.id,'@font-face{font-family:alicare-dialog-iconfont;src:url("//at.alicdn.com/t/font_1471933726_7338545.eot");src:url("//at.alicdn.com/t/font_1471933726_7338545.eot?#iefix") format("embedded-opentype"),url("//at.alicdn.com/t/font_1471933726_7338545.woff") format("woff"),url("//at.alicdn.com/t/font_1471933726_7338545.ttf") format("truetype"),url("//at.alicdn.com/t/font_1471933726_7338545.svg#iconfont") format("svg")}.alicare-dialog-iconfont{font-family:alicare-dialog-iconfont;font-size:16px;font-style:normal;line-height:normal;-webkit-font-smoothing:antialiased}#J_xiaomi_dialog{position:fixed;font-family:PingFang SC,HEITI SC,Microsoft YaHei,STHeiti Light,sans-serif!important}#J_xiaomi_dialog .J_weak{background-color:#fff;width:56px;text-align:center;padding:8px 0;box-sizing:content-box;border:2px solid #f5f5f5;border-radius:4px;color:#b7b7b7;cursor:pointer}#J_xiaomi_dialog .J_weak:hover{border-color:#f7931e;color:#f7931e}#J_xiaomi_dialog .J_weak.active{border-color:#f7931e;background-color:#f7931e;color:#fff}#J_xiaomi_dialog .J_weak.active .xiaomi-avatar,#J_xiaomi_dialog .J_weak.active:hover{color:#fff}#J_xiaomi_dialog .J_weak .xiaomi-avatar{margin-bottom:4px;height:32px;font-size:30px;color:#f7931e}#J_xiaomi_dialog .J_weak .alicare-weak-text{font-size:14px;margin:0;height:17px}#J_xiaomi_dialog .J_weak .alicare-weak-text:first-of-type{position:relative;left:3px}#J_xiaomi_dialog .J_strong{width:150px;position:relative}#J_xiaomi_dialog .J_strong .alicare-strong-card{background-color:#f9f9f9;border-radius:4px;overflow:hidden;position:relative}#J_xiaomi_dialog .J_strong .alicare-strong-card .alicare-strong-header{background-color:#f7931e;text-align:center;color:#fff;font-size:12px;padding:11px 0 5px;margin:0}#J_xiaomi_dialog .J_strong .alicare-strong-card .alicare-strong-header span{font-size:18px}#J_xiaomi_dialog .J_strong .alicare-strong-card ul{list-style:none;margin:0;padding:3px 7px;font-size:12px}#J_xiaomi_dialog .J_strong .alicare-strong-card ul li{border-bottom:1px solid #ddd;padding:0 8px 1px;line-height:24px;width:100%;box-sizing:border-box;overflow:hidden;max-height:48px;cursor:pointer}#J_xiaomi_dialog .J_strong .alicare-strong-card ul li:hover{background-color:#fff}#J_xiaomi_dialog .J_strong .alicare-strong-card .alicare-strong-consult{text-align:center;font-size:14px;margin:0;padding:8px 0}#J_xiaomi_dialog .J_strong .alicare-strong-card .alicare-strong-consult a{color:#34bbf9;cursor:pointer!important}#J_xiaomi_dialog .J_strong .alicare-strong-card .alicare-strong-consult span{vertical-align:middle;display:inline-block}#J_xiaomi_dialog .J_strong .alicare-strong-card .alicare-strong-consult .talk-icon{margin-left:7px;background-image:url("//img.alicdn.com/tps/TB1eua9LXXXXXa7aFXXXXXXXXXX-245-66.png");width:15px;height:16px;background-position:-230px 0}#J_xiaomi_dialog .J_strong .close-icon{background:#f7931e url("//img.alicdn.com/tps/TB1aEnhMVXXXXXRapXXXXXXXXXX-16-16.png");border-radius:50%;width:16px;height:16px;position:absolute;right:-8px;top:62px;cursor:pointer;z-index:1}#J_xiaomi_dialog .J_strong .xiaomi-doll{position:relative}#J_xiaomi_dialog .J_strong .xiaomi-doll>div{display:inline-block}#J_xiaomi_dialog .J_strong .xiaomi-doll .xiaomi-body{position:relative;right:-105px;top:14px;width:45px;height:36px;background-image:url("//img.alicdn.com/tps/TB1eua9LXXXXXa7aFXXXXXXXXXX-245-66.png")}#J_xiaomi_dialog .J_strong .xiaomi-doll .xiaomi-dialog{position:absolute;left:14px;top:30px;width:64px;height:34px;background-image:url("//img.alicdn.com/tps/TB1eua9LXXXXXa7aFXXXXXXXXXX-245-66.png");background-position:-150px 0}#J_xiaomi_dialog .J_strong .xiaomi-doll .xiaomi-header{position:relative;right:-42px;top:10px;width:49px;height:66px;background-position:-45px 0;background-image:url("//img.alicdn.com/tps/TB1eua9LXXXXXa7aFXXXXXXXXXX-245-66.png");z-index:1}#J_xiaomi_dialog .J_Dialog{position:absolute;overflow:hidden;display:none;padding:8px;width:724px;height:554px;left:-728px;bottom:-8px}#J_xiaomi_dialog .J_Dialog .alicare-dialog-wrapper{position:absolute;overflow:hidden;border:2px solid #ddd;border-radius:10px 10px 10px 0;box-shadow:0 2px 6px 0 rgba(0,0,0,.3)}#J_xiaomi_dialog .J_Dialog .alicare-dialog-wrapper .alicare-fake-header{position:absolute;top:0;width:100%;height:60px}#J_xiaomi_dialog .J_Dialog .alicare-dialog-wrapper .alicare-fake-header .alicare-im-close{position:absolute;top:19px;left:680px;cursor:pointer}#J_xiaomi_dialog .J_Dialog .alicare-dialog-wrapper .alicare-fake-header .alicare-im-close img{display:block;width:21px}#J_xiaomi_dialog .J_Dialog .alicare-dialog-wrapper iframe{display:block;border:none}#J_xiaomi_dialog .J_Dialog .alicare-dialog-wrapper .dialog-fake-mask{background:transparent;width:100%;height:100%;position:absolute;top:0;left:0;visibility:hidden}',""]);
},function(t,e){t.exports='<div class=J_Dialog><div class=alicare-dialog-wrapper><div class=dialog-fake-mask></div><div class="alicare-fake-header alicare-draggable"><a class=alicare-im-close><img src=//gw.alicdn.com/tps/TB1rdn.OpXXXXbXaXXXXXXXXXXX-21-21.svg></a></div><iframe width=720 height=550 class=alicare-frame name=alicare-dialog></iframe></div></div>'},function(t,e){t.exports='<div class=J_strong><div class="xiaomi-doll alicare-draggable"><div class=xiaomi-dialog></div><div class=xiaomi-body></div><div class=xiaomi-header></div></div><span class=close-icon></span><div class=alicare-strong-card><p class="alicare-strong-header alicare-draggable">有问题？找<span>小蜜</span>哦~</p><ul></ul><p class="alicare-strong-consult alicare-draggable"><a><span>咨询小蜜</span><span class=talk-icon></span></a></p></div></div>'},function(t,e){t.exports='<div class=J_weak><div class="xiaomi-avatar alicare-dialog-iconfont">&#xe61b;</div><p class=alicare-weak-text>有问题？</p><p class=alicare-weak-text>找小蜜</p></div>'},function(t,e,i){function o(t,e){for(var i=0;i<t.length;i++){var o=t[i],n=p[o.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](o.parts[r]);for(;r<o.parts.length;r++)n.parts.push(c(o.parts[r],e))}else{for(var a=[],r=0;r<o.parts.length;r++)a.push(c(o.parts[r],e));p[o.id]={id:o.id,refs:1,parts:a}}}}function n(t){for(var e=[],i={},o=0;o<t.length;o++){var n=t[o],r=n[0],a=n[1],s=n[2],l=n[3],c={css:a,media:s,sourceMap:l};i[r]?i[r].parts.push(c):e.push(i[r]={id:r,parts:[c]})}return e}function r(t,e){var i=m(),o=_[_.length-1];if("top"===t.insertAt)o?o.nextSibling?i.insertBefore(e,o.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),_.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(e)}}function a(t){t.parentNode.removeChild(t);var e=_.indexOf(t);e>=0&&_.splice(e,1)}function s(t){var e=document.createElement("style");return e.type="text/css",r(t,e),e}function l(t){var e=document.createElement("link");return e.rel="stylesheet",r(t,e),e}function c(t,e){var i,o,n;if(e.singleton){var r=y++;i=v||(v=s(e)),o=u.bind(null,i,r,!1),n=u.bind(null,i,r,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=l(e),o=d.bind(null,i),n=function(){a(i),i.href&&URL.revokeObjectURL(i.href)}):(i=s(e),o=f.bind(null,i),n=function(){a(i)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else n()}}function u(t,e,i,o){var n=i?"":o.css;if(t.styleSheet)t.styleSheet.cssText=b(e,n);else{var r=document.createTextNode(n),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(r,a[e]):t.appendChild(r)}}function f(t,e){var i=e.css,o=e.media;if(o&&t.setAttribute("media",o),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}function d(t,e){var i=e.css,o=e.sourceMap;o&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */");var n=new Blob([i],{type:"text/css"}),r=t.href;t.href=URL.createObjectURL(n),r&&URL.revokeObjectURL(r)}var p={},h=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},g=h(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),m=h(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,y=0,_=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=g()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var i=n(t);return o(i,e),function(t){for(var r=[],a=0;a<i.length;a++){var s=i[a],l=p[s.id];l.refs--,r.push(l)}if(t){var c=n(t);o(c,e)}for(var a=0;a<r.length;a++){var l=r[a];if(0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete p[l.id]}}}};var b=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}()},function(t,e,i){var o=i(16);"string"==typeof o&&(o=[[t.id,o,""]]);i(20)(o,{});o.locals&&(t.exports=o.locals)}]);